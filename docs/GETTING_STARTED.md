# 🚀 가족 트리 - 시작 가이드

## 📦 설치

### 1단계: 의존성 설치

```bash
npm install
```

### 2단계: 데이터베이스 초기화

**빈 데이터베이스로 시작:**
```bash
npm run init-db
```

**샘플 데이터와 함께 시작 (추천):**
```bash
npm run init-db-sample
```

샘플 데이터에는 다음이 포함됩니다:
- **1세대 (증조부모)**: 김대호, 최영숙, 박영수, 이순덕
- **2세대 (조부모)**: 김일중, 박순자, 김일수, 정미숙
- **3세대 (부모)**: 김철수, 이영희, 김철민, 김미영, 김준호, 김수진
- **4세대 (자녀)**: 김민수, 김지은, 김서연, 김하준

총 4세대, 18명의 가족 구성원 데이터가 포함됩니다.

### 3단계: 서버 실행

**개발 모드 (자동 재시작):**
```bash
npm run dev
```

**프로덕션 모드:**
```bash
npm start
```

### 4단계: 브라우저에서 접속

```
http://localhost:3000
```

## 🎯 주요 기능

### 1. 대시보드
- 전체 통계 확인
- 최근 추가된 가족 구성원 보기

### 2. 가족 구성원 관리
- 전체 가족 구성원 목록 조회
- 검색 기능 (이름, 전화번호, 이메일)
- 필터링 (생존 여부, 성별, 세대)
- 상세 정보 보기
- 수정 및 삭제

### 3. 가계도 시각화
- 전체 가계도 보기
- 특정 인물 중심으로 보기
- 세대별 표시

### 4. 새 가족 추가
- 기본 정보 입력
- 사진 업로드
- 가족 관계 설정 (부모, 배우자)

## 📝 사용 예시

### API를 통한 데이터 조작

#### 1. 새로운 사람 추가

```bash
curl -X POST http://localhost:3000/api/persons \
  -H "Content-Type: application/json" \
  -d '{
    "name": "홍길동",
    "gender": "male",
    "birth_date": "1990-05-15",
    "phone_number": "010-1111-2222",
    "email": "hong@example.com",
    "generation": 3
  }'
```

#### 2. 모든 사람 조회

```bash
curl http://localhost:3000/api/persons
```

#### 3. 특정 사람의 가족 관계 조회

```bash
curl http://localhost:3000/api/persons/1/family
```

#### 4. 가계도 데이터 조회

```bash
curl http://localhost:3000/api/tree
```

#### 5. 통계 조회

```bash
curl http://localhost:3000/api/persons/stats
```

### 웹 UI를 통한 사용

1. **대시보드 보기**
   - 메인 페이지에서 전체 통계 확인
   - 최근 추가된 가족 구성원 확인

2. **가족 구성원 관리**
   - "가족 구성원" 메뉴 클릭
   - 검색창에서 원하는 사람 검색
   - 카드 클릭하여 상세 정보 확인
   - 상세 정보 모달에서 수정/삭제 가능

3. **새 가족 추가**
   - "새 가족 추가" 메뉴 클릭
   - 폼 작성 (이름은 필수)
   - 부모/배우자 선택 (선택사항)
   - 사진 업로드 (선택사항)
   - "추가" 버튼 클릭

4. **가계도 보기**
   - "가계도" 메뉴 클릭
   - 선으로 연결된 시각화된 가계도 확인
   - 부모-자녀 관계가 선으로 표시됨
   - 배우자 관계가 수평선으로 연결됨
   - 중심 인물 선택하여 특정 가족 중심으로 보기
   - 줌 버튼(🔍−, 100%, 🔍+)으로 확대/축소
   - 간소화 모드로 더 작게 표시

## 🗂 데이터 관리

### 데이터베이스 위치
```
data/familytree.db
```

### 백업 생성
데이터베이스 파일을 복사하여 백업:
```bash
# Windows
copy data\familytree.db data\backup\familytree-backup.db

# Linux/Mac
cp data/familytree.db data/backup/familytree-backup.db
```

### 데이터 초기화
데이터를 완전히 초기화하려면:
```bash
# 1. 서버 종료
# 2. 데이터베이스 파일 삭제
rm data/familytree.db  # Linux/Mac
del data\familytree.db  # Windows

# 3. 다시 초기화
npm run init-db-sample
```

## 🔧 문제 해결

### 포트가 이미 사용 중인 경우

환경 변수로 포트 변경:
```bash
# Windows
set PORT=3001 && npm start

# Linux/Mac
PORT=3001 npm start
```

### 데이터베이스 오류

1. `data/` 디렉토리가 있는지 확인
2. 쓰기 권한이 있는지 확인
3. 데이터베이스 파일을 삭제하고 다시 초기화

### 사진 업로드 오류

1. `uploads/` 디렉토리가 있는지 확인
2. 쓰기 권한이 있는지 확인
3. 파일 크기가 5MB 이하인지 확인
4. 이미지 파일 형식인지 확인 (jpg, png, gif, webp)

## 📱 브라우저 호환성

- Chrome (최신 버전) ✅
- Firefox (최신 버전) ✅
- Safari (최신 버전) ✅
- Edge (최신 버전) ✅

## 💡 팁

1. **효율적인 데이터 입력**
   - 먼저 가장 높은 세대(증조부모)부터 추가
   - 부모를 추가한 후 자녀 추가
   - 관계 설정을 통해 가계도가 자동으로 구성됨
   - 배우자 관계를 먼저 설정하면 가계도에서 함께 표시됨

2. **사진 관리**
   - 일관된 크기의 사진 사용 권장 (정사각형 추천)
   - 파일명을 의미있게 지정 (예: 김일중-프로필.jpg)
   - 사진이 없어도 성별에 따라 자동 아이콘 생성됨

3. **검색 활용**
   - 이름의 일부만 입력해도 검색 가능
   - 전화번호로도 검색 가능
   - 필터로 생존 여부, 성별, 세대 구분 가능

4. **세대 관리**
   - 세대 번호는 수동으로 설정 (1, 2, 3, 4...)
   - 일관성있게 세대를 관리하면 가계도가 깔끔함
   - 증조부모를 1세대로 시작 권장

5. **가계도 활용**
   - 줌 기능으로 큰 가계도도 한눈에 보기
   - 간소화 모드로 더 많은 가족을 화면에 표시
   - 특정 인물 클릭하여 상세 정보 확인
   - 중심 인물 선택으로 특정 가족 라인만 보기

## 🆘 도움말

문제가 발생하거나 질문이 있으시면:
1. README.md 문서 참고
2. DESIGN.md에서 아키텍처 확인
3. GitHub Issues에 문의 (프로젝트가 GitHub에 있는 경우)

## 🎉 즐거운 가족 트리 만들기!

가족의 역사를 기록하고 공유하세요! 

